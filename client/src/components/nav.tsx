import * as React from 'react';
import AppBar from '@mui/material/AppBar';
import Box from '@mui/material/Box';
import Toolbar from '@mui/material/Toolbar';
import IconButton from '@mui/material/IconButton';
import Typography from '@mui/material/Typography';
import Menu from '@mui/material/Menu';
import MenuIcon from '@mui/icons-material/Menu';
import Container from '@mui/material/Container';
import Button from '@mui/material/Button';
import MenuItem from '@mui/material/MenuItem';
import { useNavigate } from 'react-router-dom';

const pages = ['apps'];

export default function Nav() {
    const [anchorElNav, setAnchorElNav] = React.useState<null | HTMLElement>(null);
    const navigate = useNavigate();

    const handleOpenNavMenu = (event: React.MouseEvent<HTMLElement>) => {
        setAnchorElNav(event.currentTarget);
    };

    const handleCloseNavMenu = () => {
        setAnchorElNav(null);
    };

    const onNavigate = (page: string): void => {
        handleCloseNavMenu();
        navigate(page);
    };

    return (
        <AppBar position="static" color="success">
            <Container maxWidth="xl">
                <Toolbar disableGutters>
                    <Logo display={{ xs: 'none', md: 'flex' }} />

                    <Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' } }}>
                        <IconButton
                            size="large"
                            aria-label="account of current user"
                            aria-controls="menu-appbar"
                            aria-haspopup="true"
                            onClick={handleOpenNavMenu}
                            color="inherit"
                            >
                            <MenuIcon />
                        </IconButton>
                        <Menu
                            id="menu-appbar"
                            anchorEl={anchorElNav}
                            anchorOrigin={{
                                vertical: 'bottom',
                                horizontal: 'left',
                            }}
                            keepMounted
                            transformOrigin={{
                                vertical: 'top',
                                horizontal: 'left',
                            }}
                            open={Boolean(anchorElNav)}
                            onClose={handleCloseNavMenu}
                            sx={{ display: { xs: 'block', md: 'none' } }}
                            >
                            {pages.map((page) => (
                                <MenuItem key={page} onClick={() => onNavigate(page)}>
                                    <Typography sx={{ textAlign: 'center' }}>{page}</Typography>
                                </MenuItem>
                            ))}
                        </Menu>
                    </Box>

                    <Logo display={{ xs: 'flex', md: 'none' }} flexGrow={1}/>

                    <Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }}>
                        {pages.map((page) => (
                            <Button
                                key={page}
                                onClick={() => onNavigate(page)}
                                sx={{ my: 2, color: 'white', display: 'block' }}
                            >
                                {page}
                            </Button>
                        ))}
                    </Box>

                </Toolbar>
            </Container>
        </AppBar>
    );
}

function Logo({ display, flexGrow }: { display: object, flexGrow?: number }): JSX.Element {

    const navigate = useNavigate();

    const onNavigate = (event: React.MouseEvent) => {
        event.preventDefault();
        navigate('/');
    };

    return (
        <>
            <Box sx={{ display, mr: 1 }}>
                <svg width="38px" height="38px" viewBox="0 0 512 512" fill="#FFF">
                    <path d="m 255.83218,73.784314 c -0.435,0 -8.26504,7.976037 -17.40008,17.691067 l -16.52922,17.688949 0.43542,6.81603 c 0.435,5.07501 -0.43471,8.55419 -3.33472,14.35421 l -3.91672,7.68475 4.06115,8.55562 c 2.17501,4.64001 4.35044,8.40904 4.78544,8.40904 1.45001,-0.145 15.36881,-22.0387 20.44382,-31.89873 2.46501,-5.22002 6.23673,-11.60133 8.26674,-14.35634 l 3.76804,-4.92988 2.75699,3.48129 c 3.62501,4.64001 8.26363,13.33822 12.32365,22.76327 3.625,8.70002 14.93465,25.08709 16.96464,24.50708 0.725,-0.29 2.75601,-4.35044 4.64102,-9.13546 l 3.19029,-8.55561 -3.62572,-7.10488 c -3.045,-5.94503 -3.47988,-8.55575 -2.75487,-14.50078 l 0.87086,-7.39376 L 273.6677,90.748972 C 264.38765,81.468929 256.41218,73.784314 255.83218,73.784314 Z m -135.13948,58.000976 0.86873,9.71532 c 0.58,5.51003 1.01528,15.07909 1.01528,21.45912 v 11.59934 l 10.73061,16.67579 c 13.63005,21.02508 19.43024,28.99942 21.17025,28.99942 1.74001,0 2.90087,-6.37933 3.04587,-15.94936 0.145,-6.23503 -1.01488,-10.2952 -4.9299,-18.99524 -5.075,-10.58503 -9.7163,-29.28942 -7.83131,-31.17443 0.58001,-0.58 5.51103,0.14355 11.16605,1.44859 8.99003,2.17501 34.07389,3.62614 35.66889,1.88615 0.58001,-0.58 -3.91461,-5.07518 -19.13966,-18.99523 l -7.39588,-6.66947 h -22.18341 z m 248.09557,0 -22.18553,0.14442 -12.75905,11.89033 c -6.96004,6.52503 -12.61464,12.32563 -12.61464,12.90563 0,2.03001 25.66442,1.15973 35.52445,-1.01528 5.36503,-1.30501 10.15061,-2.17614 10.73062,-1.88614 2.32001,0.87 -2.60974,21.17024 -7.68475,32.04528 -4.64002,10.00504 -5.22088,12.75979 -5.22088,22.90983 0,12.47004 1.44944,14.21019 6.66947,8.12018 3.04501,-3.19002 23.49167,-34.21904 26.24667,-39.43905 0.87,-1.59501 2.02831,-12.47049 2.60831,-24.36053 l 1.0153,-21.31468 z m -123.10472,4.35002 c -0.58,0 -4.78644,5.07389 -9.42646,11.16392 -4.78501,6.23502 -8.98877,11.4559 -9.56877,11.7459 -2.32001,1.015 -1.01471,5.65362 3.19031,12.32365 l 4.35002,6.81602 10.72848,-6.66947 10.87505,-6.67158 11.31049,6.52503 11.31047,6.67158 4.49445,-7.97575 4.64101,-8.12018 -9.71532,-12.75906 c -5.22002,-7.10503 -10.15061,-12.76175 -10.73061,-12.61675 -0.72501,0.29 -2.61002,3.91516 -4.35002,8.12017 -3.62502,8.84504 -7.54033,12.32662 -9.71534,8.8466 -0.87,-1.16 -2.60959,-5.65475 -3.9146,-9.85977 -1.30499,-4.06 -2.89915,-7.54031 -3.47916,-7.54031 z m -65.10586,26.10012 c -7.25002,0 -13.05006,0.57972 -13.05006,1.15972 0,0.725 3.3343,5.07376 7.24932,9.56877 4.06002,4.49502 7.25146,9.57104 7.25146,11.16605 0,4.495 -6.38061,9.86004 -12.90563,10.87505 -6.52503,1.015 -6.66961,1.44931 -8.26462,18.12437 l -0.87086,10.87505 6.23618,5.50974 c 7.25002,6.09003 18.55881,13.92092 20.44382,13.92092 0.58,0 1.15971,-7.97547 1.15971,-17.83551 l 0.14657,-17.68895 4.49445,-2.90143 c 3.48,-2.32001 5.36503,-5.50961 8.70004,-14.78965 l 4.20559,-11.89033 -5.94517,-7.97361 -5.94518,-8.12019 z m 137.89649,0 -5.94517,7.82918 -6.09173,7.97575 5.07643,12.75907 c 3.77002,9.57003 5.94446,13.19521 8.84448,14.6452 3.77002,1.88501 3.77016,1.88546 3.77016,20.01053 0,13.34005 0.43402,17.97994 1.88402,17.97994 2.03001,0 19.2858,-12.61408 23.20081,-17.1091 2.46501,-2.60999 2.60959,-4.49573 1.73958,-16.67577 l -1.01528,-13.77437 -6.37847,-1.01528 c -4.49503,-0.58 -7.25131,-2.17586 -10.00633,-5.22088 -2.03001,-2.46501 -3.62359,-5.07573 -3.62359,-5.80073 0,-0.87001 3.3343,-5.36361 7.24932,-10.14863 4.06002,-4.78502 7.24932,-9.28075 7.24932,-10.15076 0,-0.725 -5.80002,-1.30415 -13.05006,-1.30415 z m -108.89707,25.80912 v 17.54452 17.40008 l 4.49659,5.22088 c 4.78501,5.36502 35.66974,26.82441 38.71474,26.82441 2.17501,0 2.17403,-3.33361 -0.29099,-12.32364 -4.93002,-18.56007 -17.97924,-42.05148 -27.40427,-49.1565 -2.61001,-2.03001 -7.10632,-3.91445 -10.00632,-4.49445 z m 89.61084,0.43544 c -8.55503,0.145 -16.09551,7.10561 -26.53555,23.78067 -7.83002,12.47005 -15.65907,33.34888 -14.93407,40.01891 l 0.43543,4.35002 10.58404,-6.66946 c 17.54507,-10.87504 30.16085,-20.58939 31.90086,-24.64941 1.01501,-2.17501 1.73959,-10.58647 1.73959,-20.30151 0,-16.38506 -2.9e-4,-16.67422 -3.1903,-16.52922 z m -188.93488,31.46542 c -1.16,-0.725 -7.5416,4.63905 -17.546643,14.93408 -8.700026,8.70003 -16.094785,16.53008 -16.384786,17.40008 -0.145001,0.87001 6.961453,8.99146 15.951495,18.12651 l 16.529224,16.52922 8.40905,-6.66947 8.41117,-6.52503 -9.2799,-10.43963 -9.42435,-10.44174 9.27992,-9.85976 c 5.07501,-5.36502 9.27989,-10.29504 9.27989,-10.87505 0,-0.58 -3.04601,-3.33459 -6.81603,-6.0896 -3.625,-2.75502 -7.39403,-5.50961 -8.40904,-6.08961 z m 293.36935,0.21666 c -0.75898,-0.11789 -1.37581,0.10889 -2.06457,0.50763 -6.09001,3.62502 -13.62992,10.1509 -13.62992,11.74591 0,0.87001 3.33588,4.92946 7.39589,8.84448 11.45504,11.31003 11.4549,10.87605 0.57986,22.04108 l -9.42433,9.85977 6.23403,5.3653 c 10.29504,9.13505 9.86135,9.28003 27.4064,-8.70004 8.55504,-8.84502 15.65838,-16.53064 15.65838,-17.25564 -0.14501,-0.58 -7.10334,-8.55504 -15.65838,-17.40008 -10.65754,-11.20129 -14.2204,-14.65497 -16.49736,-15.00841 z m -194.04531,18.77857 v 9.42433 c 0,13.77505 2.61045,23.92626 6.96045,27.98626 3.48002,3.19002 29.29001,18.55868 35.38004,21.0237 3.625,1.45 3.48114,-3.76905 -0.28887,-14.93409 -4.06002,-12.03504 -8.26633,-18.27023 -18.70637,-27.69527 -4.78502,-4.35001 -12.03378,-9.71532 -16.09379,-11.89033 z m 91.78585,1.73959 c -4.78501,0.145 -25.22885,15.65909 -31.31887,23.63411 -6.23502,7.97503 -12.61676,22.76554 -12.61676,28.71057 0,3.04499 0.29142,5.50973 0.72643,5.50973 2.61001,0 37.41017,-21.02411 39.15018,-23.63411 2.32001,-3.77002 4.34916,-12.61578 5.65417,-25.37583 0.87,-8.12003 0.72486,-8.98947 -1.59515,-8.84447 z m -133.11104,33.20501 c -1.74001,0 -11.74507,11.30935 -21.7501,24.6494 -3.91502,5.22002 -10.29534,13.05006 -14.06534,17.40008 -8.41004,9.42504 -9.27906,12.61678 -10.58406,36.54187 l -0.87086,18.55981 h 22.18553 l 22.18553,-0.14657 15.22507,-13.05006 c 8.41002,-7.10502 15.37049,-13.62977 15.66049,-14.20978 0.145,-0.58 -5.3663,-1.59345 -12.18133,-2.02845 -11.31004,-0.87001 -13.62851,-0.5817 -21.60354,2.60831 -4.78502,2.03001 -10.87548,4.06159 -13.48548,4.49659 -4.64002,1.015 -4.7846,0.86971 -3.9146,-3.19031 4.49503,-19.86507 6.52434,-24.21625 18.12438,-36.6863 l 11.31047,-12.03478 7.97363,2.31945 c 8.55503,2.46501 7.83173,1.45059 10.44175,15.08063 0.725,3.77002 -0.14559,5.07475 -8.55561,12.03478 -13.05005,10.73004 -13.05076,11.02091 5.07431,11.74591 l 12.32577,0.43543 6.8139,-5.80074 c 3.915,-3.48002 6.67102,-7.10447 6.81602,-8.84448 0,-3.48001 -6.96074,-35.52474 -7.97575,-36.53975 -0.29,-0.435 -8.98962,-3.48043 -19.13967,-6.96045 -10.15003,-3.48001 -19.14051,-6.38059 -20.01051,-6.38059 z m 175.74251,0.14442 c -1.88501,0.145 -38.8606,12.47104 -39.5856,13.34105 -0.87001,0.87 -8.26475,38.71517 -7.68475,39.15018 0.29,0.29 3.62374,2.7536 7.39376,5.79862 6.67001,5.22001 6.95948,5.3653 19.71952,5.3653 7.10502,0 13.34091,-0.43528 13.92091,-1.01528 0.58,-0.58001 -3.18903,-5.07475 -8.40904,-9.85977 l -9.5709,-8.70004 0.87086,-7.97362 0.86873,-8.12018 8.84447,-2.61043 8.99103,-2.61045 4.35002,5.6563 c 2.32001,3.04501 7.10461,8.40821 10.43963,11.88821 5.80001,5.94503 8.26546,11.60022 11.31047,25.52027 0.58,2.32001 1.30459,5.50989 1.73959,7.10488 0.725,2.46502 0.14456,2.61173 -4.78546,1.74172 -3.19,-0.58 -8.40876,-2.32015 -11.74378,-3.77016 -3.335,-1.45001 -8.26503,-2.75643 -10.87505,-2.90143 -11.02003,-0.58001 -22.90981,0.14571 -22.90981,1.45071 0,0.72501 6.66904,7.2492 14.93407,14.35421 l 14.78964,13.05007 22.18553,0.14656 h 22.18553 l -0.87086,-17.8355 c -1.45,-28.42012 1.8854,-22.18516 -36.53974,-69.60032 -4.35001,-5.36503 -8.69877,-9.7159 -9.56877,-9.5709 z m -88.16225,42.05161 c -3.625,0.29 -27.40427,17.25508 -27.40427,19.57509 0,4.93001 14.78923,29.86914 16.52922,27.98413 0.435,-0.435 1.45157,-4.35002 2.32158,-8.70004 1.595,-8.26502 5.50946,-15.08063 8.84447,-15.08063 3.04502,0 8.26433,8.99089 9.42433,16.09593 0.43501,3.48001 1.45058,6.81488 2.03058,7.10488 2.61001,1.59501 17.97923,-25.22997 16.52922,-28.85498 -0.435,-0.87001 -6.3789,-5.36419 -13.33892,-10.00421 -7.10503,-4.49501 -13.7762,-8.12017 -14.93621,-8.12017 z m 30.30571,28.56399 -4.92988,7.39589 c -2.75502,4.06002 -7.5406,13.19436 -10.73062,20.29938 -6.23501,14.35505 -12.3242,24.79597 -14.35421,24.79597 -1.74001,0 -9.57075,-13.63135 -14.50078,-25.23139 -2.03001,-4.78502 -6.08946,-12.90493 -8.84447,-17.97994 -2.75501,-4.93002 -5.36574,-8.98891 -5.80074,-8.98891 -0.435,0.145 -3.18903,4.05945 -6.23403,8.84448 l -5.36531,8.84447 3.77016,8.55561 c 3.04501,6.67001 3.77029,10.00391 3.19029,15.51394 l -0.72641,6.96045 17.11121,17.97994 17.10908,17.97994 4.64102,-4.20346 c 2.46501,-2.46501 10.29561,-10.5859 17.25565,-18.27094 12.61504,-13.77505 12.75977,-14.06435 12.03476,-20.29938 -0.58,-4.78502 0.14428,-8.70161 2.89931,-15.37162 l 3.62572,-8.84448 -5.07643,-8.98891 z" />
                </svg>
            </Box>

            <Typography
                onClick={onNavigate}
                variant="h5"
                noWrap
                component="a"
                href='/'
                sx={{
                    mr: 2,
                    display,
                    flexGrow,
                    fontFamily: 'monospace',
                    fontWeight: 700,
                    letterSpacing: '.3rem',
                    color: 'inherit',
                    textDecoration: 'none',
                }}
                >
                CLOUD
            </Typography>
        </>
    )
}
